"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[3161],{513(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/unresolved-dependency-editor-b7abcc9565d9810084731376cbee814e.png"},1151(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/unresolved-dependency-sync-6d8bb6ed40a27da16ff4be1e4f9ea72a.png"},1165(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/task-name-autocompletion-18027f0e144370d6be87fd9bfbad6428.png"},2340(e,n,i){i.r(n),i.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>p,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"features/dependencies","title":"Dependencies","description":"Automatic resolution, error reporting, and task name extraction from Concord dependencies","source":"@site/versioned_docs/version-0.20.0/features/dependencies.mdx","sourceDirName":"features","slug":"/features/dependencies","permalink":"/concord-intellij-ng/docs/features/dependencies","draft":false,"unlisted":false,"tags":[],"version":"0.20.0","sidebarPosition":16,"frontMatter":{"title":"Dependencies","description":"Automatic resolution, error reporting, and task name extraction from Concord dependencies","sidebar_position":16},"sidebar":"docs","previous":{"title":"Multiple Scopes","permalink":"/concord-intellij-ng/docs/features/scopes"},"next":{"title":"Concord Tool Window","permalink":"/concord-intellij-ng/docs/features/tool-window"}}');var o=i(4848),r=i(8453),t=i(7475);const c={title:"Dependencies",description:"Automatic resolution, error reporting, and task name extraction from Concord dependencies",sidebar_position:16},d="Dependencies",a={},l=[{value:"How it Works",id:"how-it-works",level:2},{value:"Supported Dependency Locations",id:"supported-dependency-locations",level:3},{value:"Task Name Completion",id:"task-name-completion",level:2},{value:"Error Reporting",id:"error-reporting",level:2},{value:"Inline Editor Errors",id:"inline-editor-errors",level:3},{value:"Build Sync Tab",id:"build-sync-tab",level:3},{value:"Server-Only Versions",id:"server-only-versions",level:2},{value:"The <code>cli</code> Profile Approach",id:"the-cli-profile-approach",level:3},{value:"Quick Fix: Add to <code>cli</code> Profile",id:"quick-fix-add-to-cli-profile",level:3},{value:"Dependency Change Tracking",id:"dependency-change-tracking",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"dependencies",children:"Dependencies"})}),"\n",(0,o.jsxs)(n.p,{children:["Concord flows use ",(0,o.jsx)("span",{className:"tokenBadge","data-kind":"step",children:"task"})," provided by external Java libraries (plugins). These are declared as Maven dependencies\nin your ",(0,o.jsx)(n.code,{children:"concord.yaml"}),". The plugin understands these declarations and uses them to power features like\n",(0,o.jsx)(n.a,{href:"#task-name-completion",children:"task name completion"})," and the ",(0,o.jsx)(n.a,{href:"./tool-window#dependencies",children:"Dependencies view"})," in the tool window."]}),"\n",(0,o.jsx)(n.h2,{id:"how-it-works",children:"How it Works"}),"\n",(0,o.jsx)(n.p,{children:"When a project is opened, the plugin:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Collects"})," all dependency declarations from ",(0,o.jsx)(n.code,{children:"configuration.dependencies"}),", ",(0,o.jsx)(n.code,{children:"configuration.extraDependencies"}),",\nand the same sections inside ",(0,o.jsx)("span",{className:"tokenBadge","data-kind":"section",children:"profiles"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Resolves"})," each dependency to a local JAR file using your Maven local repository (",(0,o.jsx)(n.code,{children:"~/.m2/repository"}),").\nIf a JAR is not found locally and the IntelliJ Maven plugin is available, it will attempt to download it."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Extracts"})," task names by scanning ",(0,o.jsx)(n.code,{children:"@Named"})," annotations inside the JARs\n(via the ",(0,o.jsx)(n.code,{children:"META-INF/sisu/javax.inject.Named"})," index)."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Provides"})," the extracted names as completion suggestions for ",(0,o.jsx)("span",{className:"tokenBadge","data-kind":"step",children:"task:"})," values, scoped to the correct project."]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"supported-dependency-locations",children:"Supported Dependency Locations"}),"\n",(0,o.jsx)(n.p,{children:"The plugin looks for dependency lists in the following YAML paths:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-concord",children:'configuration:\n  dependencies:\n    - "mvn://com.walmartlabs.concord.plugins.basic:smtp-tasks:2.8.0"\n  extraDependencies:\n    - "mvn://com.walmartlabs.concord.plugins:git:2.12.0"\n\nprofiles:\n  production:\n    configuration:\n      dependencies:\n        - "mvn://com.walmartlabs.concord.plugins:s3:1.5.0"\n'})}),"\n",(0,o.jsx)(n.h2,{id:"task-name-completion",children:"Task Name Completion"}),"\n",(0,o.jsxs)(n.p,{children:["Once dependencies are resolved, the plugin provides autocompletion for the ",(0,o.jsx)("span",{className:"tokenBadge","data-kind":"step",children:"task:"})," field in flow steps:"]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--md",children:[(0,o.jsx)("img",{src:i(1165).A,alt:"Concord Task"}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(n.p,{children:"Context-aware autocompletion for task names extracted from Maven dependencies."})})]}),"\n",(0,o.jsxs)(n.p,{children:["Task name suggestions are ",(0,o.jsx)(n.strong,{children:"scope-aware"}),": each ",(0,o.jsx)(n.a,{href:"./scopes",children:"scope"})," only shows tasks from its own dependencies."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Press ",(0,o.jsx)(t.A,{mac:[{icon:"\u2303",label:"Ctrl"},{label:"Space"}],win:[{label:"Ctrl"},{label:"Space"}]})," in a ",(0,o.jsx)(n.code,{children:"task:"})," value to see all available task names for the current scope."]})}),"\n",(0,o.jsx)(n.h2,{id:"error-reporting",children:"Error Reporting"}),"\n",(0,o.jsx)(n.p,{children:"When a dependency cannot be resolved \u2014 for example, due to incorrect coordinates or an unavailable artifact \u2014 the plugin\nreports the problem in three places simultaneously."}),"\n",(0,o.jsx)(n.h3,{id:"inline-editor-errors",children:"Inline Editor Errors"}),"\n",(0,o.jsxs)(n.p,{children:["Each unresolvable ",(0,o.jsx)(n.code,{children:"mvn://"}),' string is highlighted directly in the editor as an inspection error.\nThe error message includes the reason for the failure (e.g. "artifact not found").']}),"\n",(0,o.jsxs)(n.p,{children:["Invalid dependency format (not matching the ",(0,o.jsx)(n.code,{children:"mvn://group:artifact:version"})," pattern) is also flagged."]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--lg",children:[(0,o.jsx)("img",{src:i(513).A,alt:"Unresolved dependency highlighted in editor"}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(n.p,{children:"Unresolvable dependency string highlighted with an error and a tooltip showing the reason."})})]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["You can configure the severity of this inspection (Error, Warning, etc.) in\n",(0,o.jsx)(n.strong,{children:"Settings | Editor | Inspections | Concord | Unresolved dependency"}),"."]})}),"\n",(0,o.jsx)(n.h3,{id:"build-sync-tab",children:"Build Sync Tab"}),"\n",(0,o.jsxs)(n.p,{children:["Dependency resolution progress and errors are reported in the ",(0,o.jsx)(n.strong,{children:"Build"})," tool window under the ",(0,o.jsx)(n.strong,{children:"Sync"})," tab.\nClicking an error navigates to the exact line in the YAML file where the dependency is declared."]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--lg",children:[(0,o.jsx)("img",{src:i(1151).A,alt:"Dependency errors in Build Sync tab"}),(0,o.jsx)("figcaption",{children:(0,o.jsx)(n.p,{children:"Build tool window showing dependency resolution errors with clickable file links."})})]}),"\n",(0,o.jsxs)(n.p,{children:["Additionally, files that contain unresolved dependencies are marked as problem files in the ",(0,o.jsx)(n.strong,{children:"Project"})," tree\n(file names displayed in red), making it easy to spot affected files at a glance."]}),"\n",(0,o.jsx)(n.h2,{id:"server-only-versions",children:"Server-Only Versions"}),"\n",(0,o.jsxs)(n.p,{children:["Some dependencies use special version string like ",(0,o.jsx)(n.code,{children:"latest"})," that are resolved\nat runtime by the Concord server. While these work fine when a flow is executed on the server,\nthe IDE cannot resolve them locally \u2014 which means ",(0,o.jsx)(n.strong,{children:"task name completion"}),", ",(0,o.jsx)(n.strong,{children:"parameter validation"}),",\nand ",(0,o.jsx)(n.strong,{children:"hover documentation"})," won't work for those tasks."]}),"\n",(0,o.jsxs)(n.p,{children:["The plugin detects these versions and shows a ",(0,o.jsx)(n.strong,{children:"weak warning"})," on the dependency string:"]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--lg",children:[(0,o.jsx)("img",{src:i(9610).A,alt:"Server-only dependency version warning"}),(0,o.jsx)("figcaption",{children:(0,o.jsxs)(n.p,{children:["Weak warning on a dependency with ",(0,o.jsx)("code",{children:"latest"})," version that cannot be resolved locally."]})})]}),"\n",(0,o.jsxs)(n.h3,{id:"the-cli-profile-approach",children:["The ",(0,o.jsx)(n.code,{children:"cli"})," Profile Approach"]}),"\n",(0,o.jsxs)(n.p,{children:["The recommended solution is to add a concrete version of the dependency to a special\n",(0,o.jsx)("span",{className:"tokenBadge","data-kind":"section",children:"profiles"})," \u2192 ",(0,o.jsx)(n.code,{children:"cli"})," section. The plugin resolves\ndependencies from all profiles, including ",(0,o.jsx)(n.code,{children:"cli"}),", so this gives the IDE what it needs without\naffecting server execution:"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-concord",children:'configuration:\n  dependencies:\n    - "mvn://com.walmartlabs.concord.plugins.basic:smtp-tasks:latest"\n\nprofiles:\n  cli:\n    configuration:\n      dependencies:\n        - "mvn://com.walmartlabs.concord.plugins.basic:smtp-tasks:2.36.0"\n'})}),"\n",(0,o.jsxs)(n.p,{children:["The original ",(0,o.jsx)(n.code,{children:"latest"})," version is preserved for the server, while the IDE uses the concrete ",(0,o.jsx)(n.code,{children:"2.36.0"}),"\nto provide full autocomplete and validation."]}),"\n",(0,o.jsxs)(n.h3,{id:"quick-fix-add-to-cli-profile",children:["Quick Fix: Add to ",(0,o.jsx)(n.code,{children:"cli"})," Profile"]}),"\n",(0,o.jsx)(n.p,{children:"The plugin provides a quick fix that automates this process:"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Place the caret on the highlighted dependency."}),"\n",(0,o.jsxs)(n.li,{children:["Press ",(0,o.jsx)(t.A,{mac:[{icon:"\u2325",label:"Alt"},{label:"\u23ce"}],win:[{label:"Alt"},{label:"Enter"}]})," to open the intention menu."]}),"\n",(0,o.jsxs)(n.li,{children:["Select ",(0,o.jsx)(n.strong,{children:"Add to cli profile with concrete version"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Enter the desired version in the dialog that appears."}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["The plugin will create the ",(0,o.jsx)(n.code,{children:"profiles.cli.configuration.dependencies"})," structure automatically\nif it doesn't exist, or append to the existing list."]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--lg",children:[(0,o.jsx)("img",{src:i(5246).A,alt:"Quick fix to add dependency to cli profile"}),(0,o.jsx)("figcaption",{children:(0,o.jsxs)(n.p,{children:["Quick fix suggesting to add the dependency to the ",(0,o.jsx)("code",{children:"cli"})," profile with a concrete version."]})})]}),"\n",(0,o.jsxs)("figure",{className:"docFigure docFigure--lg",children:[(0,o.jsx)("img",{src:i(5278).A,alt:"Result after applying the quick fix"}),(0,o.jsx)("figcaption",{children:(0,o.jsxs)(n.p,{children:["After applying the fix, the concrete version is added to ",(0,o.jsx)("code",{children:"profiles.cli"})," and the warning is suppressed."]})})]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["Once a dependency with the same ",(0,o.jsx)(n.code,{children:"groupId:artifactId"})," exists in the ",(0,o.jsx)(n.code,{children:"cli"})," profile,\nthe warning on the original ",(0,o.jsx)(n.code,{children:"latest"})," version is automatically suppressed."]})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["The inspection also detects other non-resolvable version patterns (e.g. placeholders\nthat don't contain a numeric version). It works in ",(0,o.jsx)(n.code,{children:"configuration.dependencies"}),",\n",(0,o.jsx)(n.code,{children:"configuration.extraDependencies"}),", and their profile-specific variants."]})}),"\n",(0,o.jsx)(n.h2,{id:"dependency-change-tracking",children:"Dependency Change Tracking"}),"\n",(0,o.jsxs)(n.p,{children:["The plugin monitors your dependency declarations for changes. When you add, remove, or modify a dependency\nin ",(0,o.jsx)(n.code,{children:"configuration.dependencies"})," (or ",(0,o.jsx)(n.code,{children:"extraDependencies"}),"), a ",(0,o.jsx)(n.strong,{children:"floating toolbar"})," appears at the top of the editor\nwith two actions:"]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Refresh"})," \u2014 Triggers a background reload: re-resolves JARs and re-extracts task names."]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Dismiss"})," \u2014 Hides the notification until the next dependency change."]}),"\n"]}),"\n",(0,o.jsx)(n.p,{children:"The initial load happens automatically when the project is opened. After that, the plugin only prompts\nfor a reload when actual dependency values change (whitespace-only edits are ignored)."}),"\n",(0,o.jsx)(n.admonition,{title:"Maven Integration",type:"note",children:(0,o.jsxs)(n.p,{children:["If the IntelliJ Maven plugin is installed, the plugin uses its configured repositories and local repository path.\nOtherwise, it falls back to the default ",(0,o.jsx)(n.code,{children:"~/.m2/repository"})," location."]})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(h,{...e})}):h(e)}},5246(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/deps-quick-fix-257210c91c49304026ebc8034e8c9061.png"},5278(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/deps-quick-fix-result-76fc794880966c87bced0c684b905c47.png"},7475(e,n,i){i.d(n,{A:()=>t});var s=i(6540),o=i(4848);function r({keys:e}){return(0,o.jsx)("span",{className:"keystroke__keystrokes",children:e.map((e,n)=>(0,o.jsxs)("kbd",{className:"keystroke",children:[e.icon?(0,o.jsx)("span",{className:"keystroke__icon",children:e.icon}):null,e.label]},n))})}function t({mac:e,win:n}){const[i,t]=s.useState("win");return s.useEffect(()=>{t(function(){if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("os");if("mac"===e||"win"===e)return e;const n=navigator.platform?.toLowerCase()??"",i=navigator.userAgent?.toLowerCase()??"";return n.includes("mac")||i.includes("mac os")?"mac":"win"}return"win"}())},[]),"mac"===i?(0,o.jsx)(r,{keys:e}):(0,o.jsx)(r,{keys:n})}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>c});var s=i(6540);const o={},r=s.createContext(o);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(r.Provider,{value:n},e.children)}},9610(e,n,i){i.d(n,{A:()=>s});const s=i.p+"assets/images/deps-inspection-warn-02e7e0393395dba2d19985aabf18c6d0.png"}}]);