"use strict";(globalThis.webpackChunkdocs_site=globalThis.webpackChunkdocs_site||[]).push([[111],{3755(e,n,o){o.r(n),o.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>h});const s=JSON.parse('{"id":"features/scopes","title":"Multiple Scopes","description":"Support for monorepos and multiple Concord projects","source":"@site/versioned_docs/version-0.19.0/features/scopes.md","sourceDirName":"features","slug":"/features/scopes","permalink":"/concord-intellij-ng/docs/0.19.0/features/scopes","draft":false,"unlisted":false,"tags":[],"version":"0.19.0","frontMatter":{"title":"Multiple Scopes","description":"Support for monorepos and multiple Concord projects"},"sidebar":"docs","previous":{"title":"Hover Documentation","permalink":"/concord-intellij-ng/docs/0.19.0/features/hover-docs"},"next":{"title":"Dependencies","permalink":"/concord-intellij-ng/docs/0.19.0/features/dependencies"}}');var i=o(4848),l=o(8453),r=o(7475),c=o(8774);const t={title:"Multiple Scopes",description:"Support for monorepos and multiple Concord projects"},d="Multiple Scopes",a={},h=[{value:"How it Works",id:"how-it-works",level:2},{value:"Root Files",id:"root-files",level:3},{value:"Monorepo Example",id:"monorepo-example",level:2},{value:"Customizing Resources",id:"customizing-resources",level:2},{value:"Supported Patterns",id:"supported-patterns",level:3},{value:"Files Outside Scope",id:"files-outside-scope",level:2},{value:"Why this happens",id:"why-this-happens",level:3},{value:"How to fix",id:"how-to-fix",level:3},{value:"Ignored Files",id:"ignored-files",level:2},{value:"Global Search",id:"global-search",level:2},{value:"Uniqueness",id:"uniqueness",level:2}];function p(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"multiple-scopes",children:"Multiple Scopes"})}),"\n",(0,i.jsx)(n.p,{children:'Modern development often involves "monorepos" where multiple independent applications or microservices live in the same repository.'}),"\n",(0,i.jsxs)(n.p,{children:["The Concord IntelliJ Plugin fully supports this workflow through ",(0,i.jsx)(n.strong,{children:"Scopes"}),". It automatically detects and isolates independent Concord projects within a single IntelliJ workspace."]}),"\n",(0,i.jsx)(n.h2,{id:"how-it-works",children:"How it Works"}),"\n",(0,i.jsxs)(n.p,{children:['The plugin scans your project for "root" configuration files (e.g., ',(0,i.jsx)(n.code,{children:"concord.yaml"}),"). Each root file defines a ",(0,i.jsx)(n.strong,{children:"Scope"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:['All symbol resolution, code completion, and refactoring operations are strictly confined to the current scope. This prevents "pollution" where a flow named ',(0,i.jsx)(n.code,{children:"deploy"})," in ",(0,i.jsx)(n.strong,{children:"Project A"})," accidentally shows up in ",(0,i.jsx)(n.strong,{children:"Project B"}),"."]}),"\n",(0,i.jsx)(n.h3,{id:"root-files",children:"Root Files"}),"\n",(0,i.jsx)(n.p,{children:"A scope is automatically created for any directory containing one of these files:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"concord.yml"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"concord.yaml"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:".concord.yml"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:".concord.yaml"})}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"monorepo-example",children:"Monorepo Example"}),"\n",(0,i.jsx)(n.p,{children:"Consider a repository with two separate projects:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"my-monorepo/\n\u251c\u2500\u2500 billing-service/\n\u2502   \u251c\u2500\u2500 concord.yaml        <-- Root for Scope A\n\u2502   \u2514\u2500\u2500 concord/\n\u2502       \u2514\u2500\u2500 common.yaml     <-- Part of Scope A\n\u2502\n\u251c\u2500\u2500 inventory-service/\n\u2502   \u251c\u2500\u2500 concord.yaml        <-- Root for Scope B\n\u2502   \u2514\u2500\u2500 concord/\n\u2502       \u2514\u2500\u2500 common.yaml     <-- Part of Scope B\n"})}),"\n",(0,i.jsxs)(n.p,{children:["If you edit ",(0,i.jsx)(n.code,{children:"billing-service/concord.yaml"}),":"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Navigation:"})," ",(0,i.jsx)(r.A,{mac:[{icon:"\u2318",label:"Cmd"}],win:[{label:"Ctrl"}]})," + ",(0,i.jsx)(n.strong,{children:"Click"})," on a flow call will only look inside ",(0,i.jsx)(n.code,{children:"billing-service/"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Completion:"})," You will only see flows defined in ",(0,i.jsx)(n.strong,{children:"Scope A"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Validation:"})," Errors in ",(0,i.jsx)(n.code,{children:"inventory-service"})," will not appear in the context of ",(0,i.jsx)(n.code,{children:"billing-service"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"customizing-resources",children:"Customizing Resources"}),"\n",(0,i.jsxs)(n.p,{children:["By default, a scope includes the root file and any files inside the ",(0,i.jsx)(n.code,{children:"concord/"})," directory (standard Concord convention)."]}),"\n",(0,i.jsxs)(n.p,{children:["You can include additional files in a scope using the standard ",(0,i.jsx)(n.code,{children:"resources"})," directive in your ",(0,i.jsx)(n.code,{children:"concord.yaml"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-concord",children:"resources:\n  concord:\n    # Include all YAML files in the 'flows' directory\n    - \"glob:flows/**/*.concord.yaml\"\n\nflows:\n  main:\n    # The plugin will now find 'setupFlow' defined in scripts/setup.yml\n    - call: setupFlow\n"})}),"\n",(0,i.jsx)(n.h3,{id:"supported-patterns",children:"Supported Patterns"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Glob:"})," ",(0,i.jsx)(n.code,{children:"glob:path/**/*.yaml"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Regex:"})," ",(0,i.jsx)(n.code,{children:"regex:path/.*\\.yaml"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Exact:"})," ",(0,i.jsx)(n.code,{children:"path/to/file.yaml"})]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["For more details on pattern syntax, see the ",(0,i.jsx)(c.A,{to:"https://concord.walmartlabs.com/docs/processes-v2/resources.html",className:"external-link",children:"official Concord documentation"}),"."]}),"\n",(0,i.jsx)(n.admonition,{title:"Nested Scopes",type:"note",children:(0,i.jsxs)(n.p,{children:["If a file is covered by the ",(0,i.jsx)(n.code,{children:"resources"})," pattern of a parent ",(0,i.jsx)(n.code,{children:"concord.yaml"}),", it becomes part of that parent scope. It does not start a new scope, even if it is named ",(0,i.jsx)(n.code,{children:"concord.yaml"}),"."]})}),"\n",(0,i.jsx)(n.h2,{id:"files-outside-scope",children:"Files Outside Scope"}),"\n",(0,i.jsxs)(n.p,{children:["If you open a Concord file that does not belong to any defined scope (it is not a root file, is not matched by any ",(0,i.jsx)(n.code,{children:"resources"})," pattern, or ",(0,i.jsx)(n.a,{href:"#ignored-files",children:"Ignored"}),"), the IDE will display a notification:"]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"File outside Concord scope"}),"\nThis file is not in any Concord scope. Flow navigation and other features may be limited."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"why-this-happens",children:"Why this happens"}),"\n",(0,i.jsx)(n.p,{children:'This usually means the file is "orphaned." Because the plugin doesn\'t know which project this file belongs to, it cannot safely resolve flow calls or provide accurate completion.'}),"\n",(0,i.jsx)(n.h3,{id:"how-to-fix",children:"How to fix"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"If this is a new project:"})," Create a ",(0,i.jsx)(n.code,{children:"concord.yaml"})," file in the project root."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"If this is part of an existing project:"})," Update the ",(0,i.jsx)(n.code,{children:"resources"})," section of your main ",(0,i.jsx)(n.code,{children:"concord.yaml"})," to include this file path (e.g., add ",(0,i.jsx)(n.code,{children:'"glob:scripts/**/*.yml"'}),")."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"ignored-files",children:"Ignored Files"}),"\n",(0,i.jsxs)(n.p,{children:["The plugin respects your version control settings. Files that are ignored by Git (e.g., listed in ",(0,i.jsx)(n.code,{children:".gitignore"}),") are automatically ",(0,i.jsx)(n.strong,{children:"excluded"})," from all Concord scopes."]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:'They will not trigger "File outside Concord scope" warnings.'}),"\n",(0,i.jsx)(n.li,{children:"They will not participate in flow resolution or completion."}),"\n",(0,i.jsx)(n.li,{children:"They will not appear in search results or refactoring operations."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"This is particularly useful for temporary files, build artifacts, or local overrides that shouldn't be part of the project's static analysis."}),"\n",(0,i.jsx)(n.h2,{id:"global-search",children:"Global Search"}),"\n",(0,i.jsxs)(n.p,{children:["When using features like ",(0,i.jsx)(n.strong,{children:"Search Everywhere"})," (Double Shift) or ",(0,i.jsx)(n.strong,{children:"Go to Symbol"}),", you might see multiple flows with the same name across different projects."]}),"\n",(0,i.jsxs)(n.p,{children:["To help you distinguish between them, the plugin displays the ",(0,i.jsx)(n.strong,{children:"Scope Name"})," (the name of the directory containing the root file) next to each result:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deployApp"})," ",(0,i.jsx)(n.code,{children:"[billing-service]"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"deployApp"})," ",(0,i.jsx)(n.code,{children:"[inventory-service]"})]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"uniqueness",children:"Uniqueness"}),"\n",(0,i.jsx)(n.p,{children:"Scopes act as isolated namespaces."}),"\n",(0,i.jsx)(n.admonition,{title:"Allowed",type:"tip",children:(0,i.jsxs)(n.p,{children:["You can define a flow named ",(0,i.jsx)("code",{children:"utils"})," in Scope A and another ",(0,i.jsx)("code",{children:"utils"})," in Scope B."]})}),"\n",(0,i.jsx)(n.admonition,{title:"Not allowed",type:"warning",children:(0,i.jsxs)(n.p,{children:["Two flows named ",(0,i.jsx)("code",{children:"utils"})," in the same scope (even across files) will trigger a validation error."]})})]})}function u(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},7475(e,n,o){o.d(n,{A:()=>r});var s=o(6540),i=o(4848);function l({keys:e}){return(0,i.jsx)("span",{className:"keystroke__keystrokes",children:e.map((e,n)=>(0,i.jsxs)("kbd",{className:"keystroke",children:[e.icon?(0,i.jsx)("span",{className:"keystroke__icon",children:e.icon}):null,e.label]},n))})}function r({mac:e,win:n}){const[o,r]=s.useState("win");return s.useEffect(()=>{r(function(){if("undefined"!=typeof window){const e=new URLSearchParams(window.location.search).get("os");if("mac"===e||"win"===e)return e;const n=navigator.platform?.toLowerCase()??"",o=navigator.userAgent?.toLowerCase()??"";return n.includes("mac")||o.includes("mac os")?"mac":"win"}return"win"}())},[]),"mac"===o?(0,i.jsx)(l,{keys:e}):(0,i.jsx)(l,{keys:n})}},8453(e,n,o){o.d(n,{R:()=>r,x:()=>c});var s=o(6540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}}}]);